<!DOCTYPE html>




<html
 dir="ltr"
 lang="en"
 >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content=#eeeeee>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/favicon.png" 
    />
    <script defer src="https://unpkg.com/alpinejs@2.8.2/dist/alpine-ie11.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Image Tracking and Camera Pose Estimation using OpenCV | DevPika’s Corner</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Image Tracking and Camera Pose Estimation using OpenCV" />
<meta name="author" content="Ayaskant Panigrahi" />
<meta property="og:locale" content="en" />
<meta name="description" content="A deep-dive into the inner workings of AR" />
<meta property="og:description" content="A deep-dive into the inner workings of AR" />
<link rel="canonical" href="https://devpika.github.io/2024/05/05/ar-image-tracking/" />
<meta property="og:url" content="https://devpika.github.io/2024/05/05/ar-image-tracking/" />
<meta property="og:site_name" content="DevPika’s Corner" />
<meta property="og:image" content="https://devpika.github.io/assets/images/blog/ar-tracking-thumb.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-05T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://devpika.github.io/assets/images/blog/ar-tracking-thumb.jpg" />
<meta property="twitter:title" content="Image Tracking and Camera Pose Estimation using OpenCV" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ayaskant Panigrahi"},"dateModified":"2024-05-05T00:00:00+00:00","datePublished":"2024-05-05T00:00:00+00:00","description":"A deep-dive into the inner workings of AR","headline":"Image Tracking and Camera Pose Estimation using OpenCV","image":"https://devpika.github.io/assets/images/blog/ar-tracking-thumb.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://devpika.github.io/2024/05/05/ar-image-tracking/"},"url":"https://devpika.github.io/2024/05/05/ar-image-tracking/"}</script>
<!-- End Jekyll SEO tag -->

    <!-- head scripts --></head>

  <body>
    
        <section class="hero  is-small  is-bold is-primary" >
    <div class="hero-body ">
        <div class="container">
            <a href="https://devpika.github.io/"><h1 class="title is-size-2 has-text-dark has-text-weight-semibold">DevPika's Corner</h1></a>
            
        </div>
    </div>
</section>
    
    


    <section class="section main">
        <div class="container">
            <div class="columns is-multiline">
                
                <div class="column is-2-desktop is-2-tablet">
                    

<aside class="menu">

    
    <ul class="menu-list">
        
        <li>
            <a href="/" class=" pl-5 py-4 test">Home</a>
            
        </li>
        
        <li>
            <a href="/blog/" class=" pl-5 py-4 test">Blog</a>
            
        </li>
        
        <li>
            <a href="/about/" class=" pl-5 py-4 test">About</a>
            
        </li>
        
        <li>
            <a href="/projects/" class=" pl-5 py-4 test">Projects</a>
            
        </li>
        
        <li>
            <a href="/research/" class=" pl-5 py-4 test">Research</a>
            
        </li>
        
        <li>
            <a href="https://devpika.github.io/assets/Ayaskant_Panigrahi_CV.pdf" class=" pl-5 py-4 test">CV</a>
            
        </li>
            
    </ul>

</aside>
                </div>
                
                <div class="column is-8">
                    
                    
                    
                    
                    <div class="content custom-text-size">
    <h1 class="title is-3">Image Tracking and Camera Pose Estimation using OpenCV </h1>
    <p>Posted on May 5, 2024</p>

    

    <div class="tags">
      
        <a href="/tags/#Computer Vision">
          <span class="tag is-primary has-text-dark is-size-5 m-1">
            Computer Vision
          </span>
        </a>
      
        <a href="/tags/#AR">
          <span class="tag is-primary has-text-dark is-size-5 m-1">
            AR
          </span>
        </a>
      
    </div>

    <p>A deep-dive into the inner workings of AR
<!--more--></p>

<video width="400" height="400" controls="" autoplay="" muted="">
  <source src="/assets/images/blog/ar-tracking.mp4" type="video/mp4" />
Your browser does not support the video tag.
</video>

<p>While we all wait for Apple to unblock WebXR on iOS Safari, developers can either use custom SLAM solutions like <a href="https://www.8thwall.com/blog/post/41173258896/how-we-engineered-ar-for-the-mobile-browser-with-8th-wall-web">the 8th Wall SDK</a> and <a href="https://www.zappar.com/">Zappar</a>, or leverage “App Clip Players” like <a href="https://www.onirix.com/">Onirix</a> or <a href="https://launch.variant3d.com/">Variant3D</a> for cross-platform WebAR. Open-source solutions like <a href="https://github.com/AR-js-org/AR.js">AR.js</a> and <a href="https://github.com/hiukim/mind-ar-js">MindAR</a> work, but are still a far cry from the stable tracking ARCore or ARKit provide.</p>

<p>In some ways, comparing native on-device tracking vs. tracking that works completely in-browser is not fair. Native SLAM alogrithms can leverage IMU and depth maps from secondary camera / LiDAR to perform Visual-Inertial / LiDAR-Visual SLAM (VISLAM / LVSLAM) and get significantly better results. Camera calibration parameters can be computed in advance and stored per vendor-model combination. WASM on browsers is bridging the computation performance gap, but GPU-accelerated Computer Vision (either through WebGL or WebGPU) is still not there yet.</p>

<p>I implemented an image tracking pipeline using Python and OpenCV to get a deeper understanding of this topic. Following <a href="https://github.com/EdwardLu2018/wasm-ar">a good open-source reference</a> I found on Github, I first compute Akaze feature descriptors of the target, and then search for matches in frames from webcam live feed. If a match is found, I compute the homography matrix. Finally, to get the calibration parameters for camera pose estimation, I store the pixel to 3D correspondences every few matches (to get varied angles and achieve a good calibration), and then use the Solve PNP algorithm. Once calibrated, we can easily place an object at location in the image, as can be seen in the demo video. Future improvements include tracking the image using optical flow algorithms like Lucas-Kanade instead of matching features every frame. Other feature descriptors like ORB and BRISK can also be explored. You can find the code in the <a href="https://github.com/DevPika/py-image-tracking">Github repo</a>.</p>

</div>







                </div>
                <div class="column is-2-desktop is-2-tablet">
                    
<!-- some comment -->
<div class="card bio" style="border-radius: 9999px 9999px 6px 6px;" itemscope itemtype="https://schema.org/Person">

  
  <a href="https://devpika.github.io/">
    <figure class="image p-3">
      <img class="is-rounded grayscale" src="/assets/images/bio-photo.jpg" alt="Ayaskant Panigrahi" itemprop="image" class="u-photo">
    </figure>
  </a>
    

    <div class="card-content">
      <div class="content has-text-centered">
        <a class="title is-5 is-size-4" itemprop="name" href="https://devpika.github.io/">Ayaskant Panigrahi</a>
        
      </div>
      
        <div class="content">
          <p><p>Hopelessly in love with clean code and unobtrusive design!</p>
</p>
        </div>
      
      
        <div class="content">
          <p itemprop="description"><p>XR Developer &amp; Researcher</p>
</p>
        </div>
      
      <div class="content">
        
          <span class="icon-text" itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
            <span class="icon">
              <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i>
            </span>
            <span itemprop="name" class="p-locality">Vancouver</span>
          </span>
        

        
          
            
            <a href="https://twitter.com/devpika" rel="nofollow noopener noreferrer me" itemprop="sameAs">
              <span class="icon-text">
                <span class="icon">
                  <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i>
                </span>
                <span>Twitter</span>
              </span>
            </a>
            
          
            
            <a href="https://github.com/DevPika" rel="nofollow noopener noreferrer me" itemprop="sameAs">
              <span class="icon-text">
                <span class="icon">
                  <i class="fab fa-fw fa-github" aria-hidden="true"></i>
                </span>
                <span>GitHub</span>
              </span>
            </a>
            
          
            
            <a href="https://glitch.com/@gameshire" rel="nofollow noopener noreferrer me" itemprop="sameAs">
              <span class="icon-text">
                <span class="icon">
                  <i class="fas fa-link" aria-hidden="true"></i>
                </span>
                <span>Glitch</span>
              </span>
            </a>
            
          
            
            <a href="https://www.linkedin.com/in/ayaskant-panigrahi" rel="nofollow noopener noreferrer me" itemprop="sameAs">
              <span class="icon-text">
                <span class="icon">
                  <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i>
                </span>
                <span>LinkedIn</span>
              </span>
            </a>
            
          
            
            <a href="https://gameshire98.itch.io/" rel="nofollow noopener noreferrer me" itemprop="sameAs">
              <span class="icon-text">
                <span class="icon">
                  <i class="fab fa-fw fa-itch-io" aria-hidden="true"></i>
                </span>
                <span>itch.io</span>
              </span>
            </a>
            
          
            
            <a href="https://www.behance.net/ayaskant" rel="nofollow noopener noreferrer me" itemprop="sameAs">
              <span class="icon-text">
                <span class="icon">
                  <i class="fab fa-fw fa-behance-square" aria-hidden="true"></i>
                </span>
                <span>Behance</span>
              </span>
            </a>
            
          
            
          
        

        
          <a href="mailto:%61%79%61%73%6B%61%6E%74.%70%61%6E%69%67%72%61%68%69@%67%6D%61%69%6C.%63%6F%6D" rel="me" class="u-email">
            <span class="icon-text">
              <span class="icon">
                <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i>
              </span>
              <span>Email</span>
            </span>
          </a>
        
      </div>
    </div>
  </div>
</div>
                </div>
            </div>
        </div>
    </section>
    
        <footer class="footer py-3">
    <div class="container">
        
        

        <div class="content is-small has-text-centered is-vcentered">
            <p>&copy; 2024 Ayaskant Panigrahi. Created using the <a href="https://jenil.github.io/bulmaswatch/darkly/">Darkly theme</a>, <a href="https://github.com/chrisrhymes/bulma-clean-theme">Bulma Clean Gem</a> and <a href="https://jekyllrb.com/">Jekyll</a>.</p>
            <button class="button is-small ml-2" x-data @click="window.scrollTo({top: 0, behavior: 'smooth'})">Back to top</button>
        </div>
    </div>
        
</footer>
    
    <script src="/assets/js/app.js" type="text/javascript"></script><script>
    window.addEventListener("load", () => {
        const imgs = document.querySelectorAll("img.grayscale");
        imgs.forEach(element => {
            element.addEventListener('touchstart', function(e) {
                element.classList.toggle('hover_effect');
            });
            element.addEventListener('touchend', function(e) {
                element.classList.toggle('hover_effect');
            });
        });
    });
</script></body>
</html>
